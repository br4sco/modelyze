include DILLEXPORT
include DILLSIM

def n_1, n_2, n_3: Node

def m = 1.
def I = 1.
def l = 1.
def x_m, y_m: Real
def vx_m, vy_m: Real
def th_m, om_m, T_m: Real
def rr = vec x_m y_m
def vv = vec vx_m vy_m

def a = Arm l 0. m I rr vv th_m om_m n_1 n_2 n_3
def rj = ARevoluteJoint n_1 n_2

def m = a; rj
  ; x_m <- l

def main = {
  // exportDill2Modelica "Pendulum_on_Arm" m
  simulate m (0., 10.) 0.01
    [(x_m, "x"), (y_m, "y"), (th_m, ("th"))]
}
