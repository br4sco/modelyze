include DILLEXPORT
include DILL2DV

def m = 1.
def I = 1.
def l = 2.

def square(c: Color) = visualSolid (rectangle 1. 1.) (stdMaterial c 0.7)

def f_1, f_2: Frame
def th_m1, om_m1: Real
def rr_m1 = mkVec ()
def vv_m1 = mkVec ()
def x_m2, y_m2, th_m2: Real
def rr_m2 = vec x_m2 y_m2

def model = visualCpnt rr_m1 th_m1 (square BLUE) ++
            visualCpnt rr_m2 th_m2 (square GREEN) ++
            modelCpnt (Body(m, I, rr_m1, vv_m1, th_m1, om_m1, f_1); j_ vv_m1 <- 1.) ++
            modelCpnt (Body(m, I, rr_m2, th_m2, f_2)) ++
            modelCpnt (RigidArm(l, 0., f_1, f_2))

def main = {
  elaborateToFile model
  // println (exportDill2Modelica "Falling_Body" (getModel model))
}
