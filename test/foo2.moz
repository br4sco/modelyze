include OSCMMLANG

def x, y, z: <Real>
def n1, n2: Node
def vm = listToMap [(x, 2.1), (y, 1.1)]

def model = {
  init x 1.;
  x = der y;
  Branch x y n1 n2;
  sw
    (y = 3.; sw (x = 2.; init z x) (fun t: () -> x = 3.*y) (x > 2.))
    (fun t: () -> x + y = 0.)
    (y > 1. && x > 1.)
}

def main = {
  dprint(elabinits model vm)
}
