include EXPORTMATRIX

def world, f1, f2: Frame
def Jd = (1., 2., 3.)
def m = 1.

def xm1, xm2, xm3: Real
def xm = mkVector3 xm1 xm2 xm3

def qm1, qm2, qm3, qm4: Real
def qm = mkQuaternion qm1 qm2 qm3 qm4

def qr21, qr22, qr23, qr24: Real
def qr2 = mkQuaternion qr21 qr22 qr23 qr24

def Fr11, Fr12, Fr13: Real
def Fr1 = mkVector3 Fr11 Fr12 Fr13

def r = (-1., 0.,0.)

def model1 =
            bodyT m xm world f2;
            bodyR Jd qm world f2;
            rigidArm1T r Fr1 qr2 f2 f1;
            rigidArm1R f2 f1;
            rigidArm2R r Fr1 qr2 world f2;
            gravity m world f2;
            sphericalJoint world f1;
            revoluteJointR yhat xhat zhat world f1;
            qm1 <- 1.;
            qr21 <- 1.


def model2 =
            body m Jd xm qm world f2;
            rigidArm r qr2 world f1 f2;
            gravity m world f2;
            sphericalJoint world f1;
            revoluteJointR yhat xhat zhat world f1;
            qm1 <- 1.;
            qr21 <- 1.

def _ = export2ModelicaFile (elaborate model2)
