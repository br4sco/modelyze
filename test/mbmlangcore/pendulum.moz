include MBMLANG

def world, f_1, f_2, f_3, f_4: Frame

def m = 1.
def I = (1., 1., 1.)

def th_1_0 = 0.
def th_2_0 = PI / 4.

def model = {
  Body m I world f_2;
  Gravity m world f_2;
  SphericalJoint world f_1;
  RigidArm (-1., 0., 0.) (cos (th_1_0 / 2.), 0., sin (th_1_0 / 2.), 0.) world f_1 f_2;
  SphericalJoint f_2 f_3;
  RigidArm (-1., 0., 0.) (cos (th_2_0 / 2.), 0., 0., sin (th_2_0 / 2.)) world f_3 f_4;
  Body m I world f_4;
  Gravity m world f_4;  
}

def main = { elaborateToFile (equationsElement model) }

// def _ = dprintln (elaborate model)
